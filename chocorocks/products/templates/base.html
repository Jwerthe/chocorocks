<!DOCTYPE html>
<html lang="es">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="{% static 'images/logo.PNG' %}" />
    <title>{% block title %}{% endblock title %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'products/css/styles.css' %}">
    <script src="{% static 'products/js/modal.js' %}" defer></script>
  </head>
  <body>
    <!-- header -->
    <header>
      <div class="top-menu">
        <a href="/">INICIO</a>
        <a href="{% url "products:about_us" %}">SOBRE NOSOTROS</a>
        <a href="{% url "products:list_product" %}">PRODUCTOS</a>
        <a href="{% url "products:list_post" %}">NOVEDADES</a>
        <a href="#" id="buyButton">COMPRAR</a>
      </div>
      <div>
        <img src="{% static 'products/images/logo.PNG' %}" alt="Logo"/>
      </div>
      <h1>ROCAS CRUJIENTES DE CHOCOLATE</h1>
    </header>
    {% block content_1 %}{% endblock content_1 %}

    <!-- divider -->
    <h5 class="divider-1">ROCAS CRUJIENTES DE CHOCOLATE</h5>
    {% block content_2 %}{% endblock content_2 %}

    <!-- footer -->
    <div class="content-divider-2">
      <h5 class="divider-2">SNACK DE CHOCOLATE CON FRUTAS Y CEREALES</h5>
    </div>
    {% block content_3 %}{% endblock content_3 %}
    <footer>
      <div>
        <div class="bottom-menu">
          <h2>CHOCOROCKS</h2>
          <div>
            <a href="{% url "products:about_us" %}">SOBRE NOSOTROS</a>
            <a href="{% url "products:list_product" %}">PRODUCTOS</a>
            <a href="{% url "products:list_post" %}">NOVEDADES</a>
            <a href="#" id="buyButton">COMPRAR</a>
          </div>
        </div>
        <div class="contacts">
          <div>
            <a href="https://www.facebook.com/chocorocksec">FACEBOOK <img class="img-icon" src="{% static 'products/images/ficon.PNG' %}" alt="fb" /></a>
            <a href="https://www.instagram.com/chocorocksec/">INSTAGRAM <img class="img-icon" src="{% static 'products/images/iicon.PNG' %}" alt="ig" /></a>
            <a href="#">WHATSAPP <img class="img-icon" src="{% static 'products/images/wicon.PNG' %}" alt="wsp" /></a>
            <a>info.chocorock@gmail.com <img class="img-icon" src="{% static 'products/images/eicon.PNG' %}" alt="email" /></a>
          </div>
          <div>
            <img src="{% static 'products/images/logo.PNG' %}" alt="Logo" />
          </div>
        </div>
      </div>
    </footer>

    <!-- Modal de Compra -->
    <div id="buyModal" class="modal">
      <div class="modal-content">
          <!-- Botón de cerrar -->
          <span class="close-modal">&times;</span>
          
          <div class="modal-grid">
              <!-- Sección izquierda -->
              <div class="product-selection">
                  <div class="product-dropdown">
                      <button class="dropdown-btn">Seleccionar Productos</button>
                      <div class="dropdown-content">
                          {% for product in products %}
                          <div class="dropdown-item" 
                              data-product-id="{{ product.id }}"
                              data-product-name="{{ product.name }}"
                              data-product-price="{{ product.price }}"
                              data-product-image="{{ product.image.url }}">
                              {{ product.name }}
                          </div>
                          {% endfor %}
                      </div>
                  </div>
                  
                  <div id="selectedProduct" class="selected-product-card" style="display: none;">
                    <img src="" alt="Producto seleccionado">
                    <h3></h3>
                    <form class="add-to-cart-form">
                        {% csrf_token %}
                        <select class="size-select" required>
                            <option value="">Seleccione un tamaño</option>
                        </select>
                        <input type="number" name="quantity" value="1" min="1" class="quantity-input">
                        <button type="submit" class="add-cart-btn">Agregar al carrito</button>
                    </form>
                </div>
              </div>
              
              <!-- Sección derecha - Carrito -->
              <div id="cartContainer" class="cart-container">
                  <h2>Carrito de Compras</h2>
                  <div id="cartItems"></div>
                  <div id="cartTotal"></div>
              </div>

            <!-- Formulario de checkout -->
              <div id="checkoutForm" style="display: none;">
                <h2>Finalizar Pedido</h2>
                <form id="orderForm">
                    <div class="form-group">
                        <input type="text" id="name" placeholder="Nombre completo" required>
                    </div>
                    <div class="form-group">
                        <input type="tel" id="phone" placeholder="Número de teléfono" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" placeholder="Correo electrónico" required>
                    </div>
                    <button type="submit" class="checkout-btn">Enviar pedido por WhatsApp</button>
                </form>
            </div>
          </div>
      </div>
    </div>
    {% block extra_js %}{% endblock %}
  </body>
</html>
